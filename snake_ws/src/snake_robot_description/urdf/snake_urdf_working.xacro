<?xml version="1.0"?>
<robot name="snake robot" xmlns:xacro="http://ros.org/wiki/xacro">


<xacro:property name="piperdius" value="0.2" />
<xacro:property name="pipelen" value="0.6" />

<xacro:macro name="connector_macro" params="postfix">
    <link name="connector${postfix}">
        <visual>
          <geometry>
            <sphere radius="${piperdius}"/>
          </geometry>
          <material name="red"/>
        </visual>
        <collision>
            <geometry>
                <sphere radius="${piperdius}"/>
            </geometry>
          </collision>
      </link>
</xacro:macro>


<xacro:macro name="link_macro" params="name x_origin y_origin z_origin">
    <link name="${name}">
        <visual>
            <geometry>
                <cylinder length="${pipelen}" radius="${piperdius}"/>
            </geometry>
            <origin rpy="0 ${pi / 2.0} ${pi / 2.0}" xyz="${x_origin} ${y_origin} ${z_origin}"/>
            <material name="white"/>
        </visual>
        <collision>
            <geometry>
                <cylinder length="${pipelen}" radius="${piperdius}"/>
            </geometry>
          </collision>
    </link>
</xacro:macro>

<material name="blue">
    <color rgba="0 0 0.8 1"/>
</material>

<material name="white">
    <color rgba="1 1 1 1"/>
</material>

<material name="red">
    <color rgba="0.8 0 0 1"/>
</material>


<xacro:link_macro name="base_link" x_origin="0" y_origin="0" z_origin="0.2"/>


<joint name="base_to_connector" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="1000.0" lower="-${pi / 2.0}" upper="${pi / 2.0}" velocity="0.5"/>
    <parent link="base_link"/>
    <child link="connector1"/>
    <origin xyz="0 0.5 0.2"/>
</joint>

<xacro:connector_macro postfix="1" />


  <joint name="connector1_to_link1" type="fixed">
    <parent link="connector1"/>
    <child link="link1"/>
    <origin xyz="0 0.2 0.0"/>
</joint>

<xacro:link_macro name="link1" x_origin="0" y_origin="0.3" z_origin="0"/>


<joint name="link1_to_connector2" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="1000.0" lower="-${pi / 2.0}" upper="${pi / 2.0}" velocity="0.5"/>
    <parent link="link1"/>
    <child link="connector2"/>
    <origin xyz="0 0.8 0.0"/>
</joint>

    
<xacro:connector_macro postfix="2" />

<joint name="connector2_to_link2" type="fixed">
    <parent link="connector2"/>
    <child link="link2"/>
    <origin xyz="0 0.2 0.0"/>
</joint>

<xacro:link_macro name="link2" x_origin="0" y_origin="0.3" z_origin="0"/>


<joint name="link2_to_connector3" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="1000.0" lower="-${pi / 2.0}" upper="${pi / 2.0}" velocity="0.5"/>
    <parent link="link2"/>
    <child link="connector3"/>
    <origin xyz="0 0.8 0.0"/>
</joint>



<xacro:connector_macro postfix="3" />

<joint name="connector3_to_link3" type="fixed">
    <parent link="connector3"/>
    <child link="link3"/>
    <origin xyz="0 0.2 0.0"/>
</joint>

<xacro:link_macro name="link3" x_origin="0" y_origin="0.3" z_origin="0"/>



</robot>